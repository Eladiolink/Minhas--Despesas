<%- include('../partials/header') %>
<body>
    
    <%- include('../partials/navUser') %>
    
    <div class="container">

        <h1 class="display-4 mt-5">Despesas</h1>
        
        <div>
            <table class="table text-center">
              <thead>
                  <tr class="">
                      <th scope="col">Data</th>
                      <th scope="col">Tipo</th>
                      <th scope="col">Descrição</th>
                      <th scope="col">Valor</th>
                      <th scope="col">Ações</th>
                  </tr>
              </thead>
              <tbody>
                  <% despesas.forEach(despesa=>{ %>
                  <tr>
                      <td class="data"><%= despesa.data %></td>
                      <td><%= despesa.type %></td>
                      <td><%= despesa.descrition %></td>
                      <td>R$ <%= despesa.value %></td>
                      <td class="d-flex flex-column justify-content-center flex-md-row">
                        <form id="form" action="/trash" method="POST">
                          <input type="hidden" name="id" value="<%= despesa.id %>">
                          <button type="button" class="btn px-5 btn-block btn-danger" data-toggle="modal" data-target="#exampleModal">Excluir</button>
                        </form>

                        <a class="btn btn-primary btn-block my-auto" href="/edit/<%= despesa.id %>">Editar</a>
      
                          <a class="btn  btn-success btn-block my-auto" href="/finalizado/<%= despesa.id %>">Finalizado</a>
                      </td>
                      
                  </tr>
               <% }) %>
              </tbody>
            </table>
        </div>
    </div>


  
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Excluir</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          Tem certeza, que realmente deseja remover esse item?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-success" data-dismiss="modal">Fechar</button>
          <button id="true" type="button" class="btn btn-danger">Excluir</button>
        </div>
      </div>
    </div>
  </div>
<script src="scripts/data.js"></script>
<script>
    let buttonTrue=document.getElementById('true')

    buttonTrue.addEventListener('click',()=>{
        let form=document.getElementById('form').submit()
    })

</script>
</body>
<%- include('../partials/footer') %>